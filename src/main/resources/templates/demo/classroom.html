<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>XKES基础应用平台</title>
<script src="/ui/resources/js/boot.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css"
	th:href="@{/ui/resources/css/table.css}" />
</head>
<body>
<div id="classRoomTabs" class="mini-tabs" activeIndex="0" tabPosition="left" style="width:100%;height:100%;" arrowPosition="side" showNavMenu="true"
>
<div name="classRoomSubTab" title="班级信息">
<div id="layout1" class="mini-layout" style="width:100%;height:100%;">
<div title="center" region="center" >

    <div class="mini-searchbar" style="border-top:0;border-bottom-color:#d2d2d2;padding:0;line-height:30px;text-align:left">
        <form id="searchForm">
            <table style="width:100%">
                <tr>
                    <td>
                        班级名称：<input class="mini-textbox" name="like_name" emptyText="请输入班级名称" />
                        <input class="mini-hidden" name="neq_id" th:value="1"/>
                        <a class="mini-button" iconCls="icon-search" onclick="search('classroomGrid','searchForm')">查询</a>
                        <a class="mini-button" iconCls="icon-redo" onclick="resetForm('searchForm')">重置</a>
                    </td>
                    <td>
                    </td>
                </tr>
            </table>
        </form>
    </div>

    <div class="mini-toolbar" style="border-top:0;border-bottom:0">
        <a class="mini-button" id="addUserBtn" iconCls="icon-add" onclick="openAddTab('classRoomTabs','新增班级','addClassroomTab','demo/classroomForm','classroomGrid')">增加</a>
        <a class="mini-button" id="editUserBtn" iconCls="icon-edit" onclick="openEditTab('classRoomTabs','编辑编辑','editClassroomTab','demo/classroomForm','classroomGrid')">编辑</a>
        <a class="mini-button" id="queryUserBtn" iconCls="icon-find" onclick="openEditTab('classRoomTabs','查看班级','queryClassroomTab','demo/classroomForm','classroomGrid','query')">查看</a>
        <a class="mini-button" iconCls="icon-remove"  onclick="removeGrid('classroomGrid','/api/demo/classroom/multiDel')">删除</a>

    </div>
   <div class="mini-fit">
      <div class="mini-datagrid" style="width:100%;height:100%;"  id="classroomGrid" url="/api/demo/classroom/"
           ajaxOptions="{type:'get'}"
           allowAlternating="true"  multiSelect="true"  onrowclick="onSelectionChanged">
                                 <div property="columns">
                                     <div width="10%" type="checkcolumn" headerAlign="center">选择</div>
                                     <div width="10%" type="indexcolumn" headerAlign="center">序号</div>
                                     <div width="20%" headerAlign="center" field="name">年级名称</div>
                                     <div width="20%" headerAlign="center" field="grade">班级名称</div>
                                     <div width="25%" headerAlign="center" field="memo">班级描述</div>
                                     <div width="15%" headerAlign="center" field="createtime" renderer="ondayRenderer" dateFormat="yyyy-MM-dd HH:mm:ss">创建时间</div>
                                 </div>
                             </div>
   </div>
   </div>
   
   <div  region="south" height="300" showCollapseButton="false" splitSize="2" showHeader="false">
   <div class="mini-toolbar" style="border-top:0;border-bottom:0">
       <form id="stuSearchForm">
       <a class="mini-button" iconCls="icon-add" onclick="openAddTab('classRoomTabs','新增学生','addStuTab','demo/studentForm','studentGrid','classroomGrid')">新增</a>
       <a class="mini-button" iconCls="icon-edit" onclick="openEditTab('classRoomTabs','修改学生信息','editStuTab','demo/studentForm','studentGrid')">编辑</a>
       <a class="mini-button" iconCls="icon-detail" onclick="openEditTab('classRoomTabs','学生详细','detailStuTab','demo/studentForm','studentGrid','query')">详细</a>
       <a class="mini-button" iconCls="icon-remove"  id="deleBtn" onclick="removeGrid('studentGrid','/api/demo/student/multiDel')">删除</a>
       <span class="separator"></span>

        学生姓名：<input class="mini-textbox" name="like_name" emptyText="学生姓名" />
           <input name="cid" class="mini-hidden" id="cid" value="-1"/>
           <a class="mini-button" iconCls="icon-search" onclick="search('studentGrid','stuSearchForm')">查询</a>
           <a class="mini-button" iconCls="icon-redo" onclick="resetForm('stuSearchForm','cid')">重置</a>
       </form>
   </div>
   <div class="mini-fit">
       <div class="mini-datagrid" style="width:100%;height:100%;" id="studentGrid"  url="/api/demo/student/"  ajaxOptions="{type:'get'}" allowAlternating="true" sizeList="[10,20,50]" multiSelect="true" pageSize="10">
                                 <div property="columns">
                                     <div width="50" type="checkcolumn" headerAlign="center">选择</div>
                                     <div width="50" type="indexcolumn" headerAlign="center">序列</div>
                                     <div width="100" headerAlign="center" align="center" allowSort="true"  field="name">学生姓名</div>
                                     <div width="200" headerAlign="center" align="center" allowSort="true" field="address">家庭地址</div>
                                     <div width="100" headerAlign="center" align="center" allowSort="true" field="age">年龄</div>
                                     <div width="100" headerAlign="center" align="center" allowSort="true" field="classroom">年级</div>
                                     <div width="150" headerAlign="center" align="center" allowSort="true" field="grade">班级</div>
                                     <div width="150" headerAlign="center" align="center" field="createtime" renderer="ondayRenderer" dateFormat="yyyy-MM-dd HH:mm:ss">创建时间</div>
                                     <div width="150" headerAlign="center" align="center" field="memo" >备注说明</div>
                                 </div>
                             </div>
   </div>
   </div>
   
</div>
</div>
   </div>
   
   <script type="text/javascript">
    mini.parse();
    var grid = mini.get("classroomGrid");
    var stuGrid = mini.get("studentGrid");
    grid.load();
    function onSelectionChanged(e) {
        var grid = e.sender;
        var record = grid.getSelected();
        if (record) {
            stuGrid.load({cid:record.id,sortField:"createtime",sortOrder:"DESC"});
            mini.get("cid").setValue(record.id);
        }
    }
</script>
   
</body>
</html>
